{"version":3,"sources":["../moh.js/manageWorkbookTemplates.js"],"names":["$","document","ready","loadWorkbooks","addslashes","str","replace","ajax","url","type","done","response","success","console","log","workbooks","container","html","i","length","name","encodeURIComponent","append","fail","xhr","status","error","showModalAlert","responseJSON","message","deleteWorkbook","data","decodeURIComponent","showAlert","title","msg","find","end","modal","fadeIn","hideAlert","fadeOut"],"mappings":"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","sourcesContent":["$(document).ready(function () {\r\n    loadWorkbooks();\r\n});\r\n\r\nfunction addslashes( str ) {\r\n    return (str + '').replace(/[\\\\\"']/g, '\\\\$&').replace(/\\u0000/g, '\\\\0');\r\n}\r\n\r\nfunction loadWorkbooks() {\r\n    $.ajax({\r\n        url: '/api/admin/workbooks',\r\n        type: 'GET',\r\n    }).done(function (response) {\r\n        if(response.success) {\r\n            console.log(response);\r\n            var workbooks = response.workbooks;\r\n            var container = $('#workbooks');\r\n            container.html('');\r\n            for (var i = 0; i < workbooks.length; i++) {\r\n                var name = encodeURIComponent(workbooks[i].name);\r\n                container.append('<span class=\"btn btn-outline-secondary-no-hover form-name-box mr-2\">\\n' +\r\n                    '<span class=\"fas fa-table\"></span> ' + workbooks[i].name +\r\n                    '<a class=\"btn btn-outline-success ml-3\" href=\"/edit-workbook-template/' + name +'\">' +\r\n                    'Edit</a> <a class=\"btn btn-outline-danger\" href=\"#\" onclick=\"deleteWorkbook(\\'' + addslashes(name) +'\\')\"> Delete</a> </span>');\r\n            }\r\n        }\r\n    }).fail(function(xhr, status, error) {\r\n        console.log('fail');\r\n        showModalAlert('Error', xhr.responseJSON.message);\r\n    });\r\n}\r\n\r\n// To-DO add confirmation dialog\r\n// All filled workbooks will also be deleted.\r\nfunction deleteWorkbook(name) {\r\n    $.ajax({\r\n        url: '/api/admin/workbook/',\r\n        type: 'DELETE',\r\n        data: {name: decodeURIComponent(name)}\r\n    }).done(function (response) {\r\n        if(response.success) {\r\n            console.log(response);\r\n            showAlert(response.message);\r\n            loadWorkbooks();\r\n        }\r\n    }).fail(function(xhr, status, error) {\r\n        console.log('fail');\r\n        showModalAlert('Error', xhr.responseJSON.message);\r\n    });\r\n}\r\n\r\nfunction showModalAlert(title, msg) {\r\n    $('#msg-modal').find('h5').html(title).end().find('p').html(msg).end().modal('show');\r\n}\r\n\r\nfunction showAlert(msg) {\r\n    $('#alert-text').html(msg);\r\n    $('#alert').fadeIn();\r\n}\r\n\r\nfunction hideAlert() {\r\n    $('#alert').fadeOut();\r\n}"],"file":"manageWorkbookTemplates.js"}